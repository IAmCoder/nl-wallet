# Integration tests

## Performance test

### Configuration

This test is meant to be run against an already running (external) environment. It uses the wallet default
configuration determined by `wallet/.env` (or by using environment variables).

In addition, it requires an `test_integration/.env` file containing two keys:

- `RELYING_PART_URL`: The external URL from where the disclosure flow is started. Is used as return_url.
- `WALLET_SERVER_REQUESTER_URL`: The internal URL where the disclosure session is started. Normally used by Normally
  used by the relying party server.

This file is automatically generated by the `scripts/setup-devenv.sh` script for running the performance test locally.

### Running locally

To run the test locally, the following servers need to be started:

    ./scripts/start-devenv.sh postgres wallet_provider configuration_server wallet_server digid_connector brp

or shorter:

    ./scripts/start-devenv.sh postgres wp cs ws digid brp

The performance test should be built using the `allow_http_return_url` feature.

### Running externally

Change the values in `test_integration/.env` appropriately. The `allow_http_return_url` feature is not necessary (but also
doesn't hurt).
